<div class="row-fluid">
	<div class="col-sm-1">
		<votebox @Vote="Cm.Post.Vote" @VoteUrl="PostVoteUrl"></votebox>
	</div>
	<div class="col-sm-11">
	   	<div>
			<a @href="Ctx.GetLink(cm.Post)">{{ Cm.Post.Title }}</a>
			<div !group #range(_,label)="Cm.Post.Labels">
				<span class="label label-default">{{ label }}</span>
			</div>
		</div>
		<div>
			<small class="text-muted">submitted {{ Cm.Post.Time }} hours ago by</small>
			{{ Cm.Post.Author }}
		</div>
		<div class="panel panel-default" #ifn="$.emptyStr(Cm.Post.Content)">
		  	<div class="panel-body" #html="Cm.Post.Content">
		  	</div>
		</div>
	</div>
</div>
						
<div class="row-fluid">
	<div class="col-sm-12">
		<div>
			<small class="text-muted" id="test">{{ $.len(Cm.Comments) }} Comments</small>
		</div>
		<div>
			<form>
				<div class="form-group">
					<textarea rows="3" cols="80" #value(change)="Cm.NewComment"></textarea>
				</div>
			</form>
		</div>
		<div>
			<button class="btn btn-success" @disabled="$.emptyStr(Cm.NewComment)"
			#on(click)="cm.AddComment">Save</button>
			&nbsp;&nbsp; Sort by: 
			<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
				{{ Cm.RankMode }} <span class="caret"></span>
			</button>
            <ul class="dropdown-menu" role="menu">
				<li #range(_,mode)="rankModes">
					<a href="#" #on(click)="@FetchComments(mode.Code)">
						{{ mode.Name }}
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>

<div class="row-fluid" #each(_,comment)="Cm.Comments">
	<div class="col-sm-1"><VoteBox @Vote="comment.Voting()" @VoteUrl="CommentVoteUrl(comment)"></VoteBox></div>
	<div class="col-sm-11">
		<div>
			<small class="text-muted">submitted {{ comment.Time }} hours ago by</small>
			{{ comment.Author }}
		</div>
		<div class="panel panel-default">
		  	<div class="panel-body">
		    {{ comment.Content }}
		  	</div>
		</div>
	</div>
</div>